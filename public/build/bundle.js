var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){(null!=e||t.value)&&(t.value=e)}function v(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function m(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function y(t,e,n){t.classList[n?"add":"remove"](e)}let g;function b(t){g=t}const x=[],w=[],_=[],$=[],C=Promise.resolve();let T=!1;function S(t){_.push(t)}let O=!1;const k=new Set;function E(){if(!O){O=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];b(e),N(e.$$)}for(x.length=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];k.has(e)||(k.add(e),e())}_.length=0}while(x.length);for(;$.length;)$.pop()();T=!1,O=!1,k.clear()}}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const I=new Set;function P(t,e){-1===t.$$.dirty[0]&&(x.push(t),T||(T=!0,C.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(r,s,c,l,u,d,p=[-1]){const f=g;b(r);const h=s.props||{},v=r.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:p};let m=!1;if(v.ctx=c?c(r,h,(t,e,...n)=>{const o=n.length?n[0]:e;return v.ctx&&u(v.ctx[t],v.ctx[t]=o)&&(v.bound[t]&&v.bound[t](o),m&&P(r,t)),e}):[],v.update(),m=!0,o(v.before_update),v.fragment=!!l&&l(v.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);v.fragment&&v.fragment.l(t),t.forEach(i)}else v.fragment&&v.fragment.c();s.intro&&((y=r.$$.fragment)&&y.i&&(I.delete(y),y.i(x))),function(t,n,r){const{fragment:s,on_mount:c,on_destroy:i,after_update:l}=t.$$;s&&s.m(n,r),S(()=>{const n=c.map(e).filter(a);i?i.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(S)}(r,s.target,s.anchor),E()}var y,x;b(f)}function q(t){let e,n,a,r,v,y,g,b,x,w,_,$,C,T,O,k,E,N,I,P,j,q,G,B,D,L,M,Y,W,U,V,z,F,H,K,Q,R,X,Z,tt,et,nt,ot,at,rt="GET"!=t[3]&&A(t),st=""!=t[6]&&J(t);return{c(){e=l("section"),n=l("div"),a=l("h1"),a.textContent="This is a user-friendly interface to hit the Canvas API using your own security code.",r=d(),v=l("p"),v.innerHTML="<strong>You</strong> should definitely be afraid to share your security code with me. While <strong>I</strong> know that I am not saving your code somewhere, you cannot be so sure.\n\t\t",y=d(),g=l("p"),b=u("The right solution, if you want to use something like this, is to go clone the github repo and look at both what the front-end and back-end code does. Then, you can spin up your own firebase project. You can see the active parts of the code "),x=l("a"),x.textContent="here",w=u("."),_=d(),$=l("section"),C=l("div"),T=l("div"),O=l("label"),O.textContent="Security Code",k=d(),E=l("div"),N=l("input"),I=d(),P=l("div"),j=l("label"),j.textContent="Canvas Domain",q=d(),G=l("div"),B=l("input"),D=d(),L=l("div"),M=l("label"),M.textContent="API Endpoint",Y=d(),W=l("div"),U=l("input"),V=d(),z=l("div"),F=l("select"),H=l("option"),H.textContent="GET",K=l("option"),K.textContent="PUT",Q=l("option"),Q.textContent="POST",R=d(),rt&&rt.c(),X=d(),Z=l("div"),tt=l("button"),tt.textContent="Submit",et=d(),nt=l("section"),ot=l("div"),st&&st.c(),f(a,"class","title"),f(x,"href",""),f(n,"class","container"),f(e,"class","section"),f(O,"class","label"),f(N,"class","input"),f(N,"type","password"),f(N,"placeholder","Your security code"),f(E,"class","control"),f(T,"class","field"),f(j,"class","label"),f(B,"class","input"),f(B,"type","text"),f(B,"placeholder","Domain of your canvas server"),f(G,"class","control"),f(P,"class","field"),f(M,"class","label"),f(U,"class","input"),f(U,"type","text"),f(U,"placeholder","API endpoint"),f(W,"class","control"),f(L,"class","field"),H.__value="GET",H.value=H.__value,K.__value="PUT",K.value=K.__value,Q.__value="POST",Q.value=Q.__value,void 0===t[3]&&S(()=>t[15].call(F)),f(z,"class","select"),f(tt,"class","button is-primary"),f(Z,"class","container has-text-centered"),f(C,"class","container"),f($,"class","section"),f(ot,"class","container has-text-centered"),f(nt,"class","section")},m(i,l,u){var d;c(i,e,l),s(e,n),s(n,a),s(n,r),s(n,v),s(n,y),s(n,g),s(g,b),s(g,x),s(g,w),c(i,_,l),c(i,$,l),s($,C),s(C,T),s(T,O),s(T,k),s(T,E),s(E,N),h(N,t[1]),s(C,I),s(C,P),s(P,j),s(P,q),s(P,G),s(G,B),h(B,t[2]),s(C,D),s(C,L),s(L,M),s(L,Y),s(L,W),s(W,U),h(U,t[4]),s(C,V),s(C,z),s(z,F),s(F,H),s(F,K),s(F,Q),m(F,t[3]),s(C,R),rt&&rt.m(C,null),s(C,X),s(C,Z),s(Z,tt),c(i,et,l),c(i,nt,l),s(nt,ot),st&&st.m(ot,null),t[17](ot),u&&o(at),at=[p(x,"click",(d=t[11],function(t){return t.preventDefault(),d.call(this,t)})),p(N,"input",t[12]),p(B,"input",t[13]),p(U,"input",t[14]),p(F,"change",t[15]),p(tt,"click",t[8])]},p(t,e){2&e&&N.value!==t[1]&&h(N,t[1]),4&e&&B.value!==t[2]&&h(B,t[2]),16&e&&U.value!==t[4]&&h(U,t[4]),8&e&&m(F,t[3]),"GET"!=t[3]?rt?rt.p(t,e):(rt=A(t),rt.c(),rt.m(C,X)):rt&&(rt.d(1),rt=null),""!=t[6]?st?st.p(t,e):(st=J(t),st.c(),st.m(ot,null)):st&&(st.d(1),st=null)},d(n){n&&i(e),n&&i(_),n&&i($),rt&&rt.d(),n&&i(et),n&&i(nt),st&&st.d(),t[17](null),o(at)}}}function A(t){let e,n,o,a,r,u;return{c(){e=l("div"),n=l("label"),n.textContent="Message",o=d(),a=l("div"),r=l("textarea"),f(n,"class","label"),f(r,"class","textarea"),f(r,"placeholder","Data to send in JSON"),f(a,"class","control"),f(e,"class","field")},m(i,l,d){c(i,e,l),s(e,n),s(e,o),s(e,a),s(a,r),h(r,t[5]),d&&u(),u=p(r,"input",t[16])},p(t,e){32&e&&h(r,t[5])},d(t){t&&i(e),u()}}}function J(t){let e,n,o,a,r=JSON.stringify(t[6])+"";return{c(){e=l("h2"),e.textContent="Your API response:",n=d(),o=l("div"),a=u(r),f(e,"class","title has-text-centered"),f(o,"class","container has-text-left"),v(o,"max-width","970px"),v(o,"overflow-wrap","anywhere")},m(t,r){c(t,e,r),c(t,n,r),c(t,o,r),s(o,a)},p(t,e){64&e&&r!==(r=JSON.stringify(t[6])+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(a,r)},d(t){t&&i(e),t&&i(n),t&&i(o)}}}function G(t){let e,n,o,a,r,p,h,m,y,g,b,x,w;return{c(){e=l("h1"),e.textContent="The important bits of code:",n=d(),o=l("div"),a=u("On the front-end, this function submits the form.\n\t\t\n\t\t"),r=l("pre"),p=l("code"),p.textContent="function submit(){\n\tlet body = {\n\t\tsecurity_code,\n\t\tdomain,\n\t\tgetorput,\n\t\tendpoint\n\t};\n\tif(getorput!='GET')\t{\n\t\tbody[\"data\"]=JSON.stringify(JSON.parse(data));\n\t}\n\tfetch('https://us-central1-canvas-node-server.cloudfunctions.net/helloWorld', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n\t},\n    body: JSON.stringify(body) \n  }).then(resp=>resp.json()).then(resp=>{\n\t  response = resp;\n\t  console.log('resp: ', resp);\n  }).then(resp=>respelt.scrollIntoView()).catch(err=>console.log(err));\n}",h=d(),m=l("div"),y=u("On the back-end, this function redirects the traffic over to canvas and relays the result.\n\t\t"),g=l("pre"),b=l("code"),b.textContent="app.post('/', async (req, res) => {\nconst url = req.body.domain + req.body.endpoint;\nconst options = {\n\t'method': req.body.getorput,\n\t'headers': {\n\t\t'Content-Type': 'application/json',\n\t\t'authorization': 'Bearer ' + req.body.security_code,\n\t\t'accept': 'application/json'\n\t},\n\t'body': req.body.data,\n\t'timeout': 5000\n};\nfetch(url, options).then(response=>response.json())\n.then(response=>{return res.send(response);})\n.catch(err=>{return res.send(err)});\n});",x=d(),w=l("div"),w.textContent="As a matter of fact, neither of those functions saves your security code anywhere or does anything malicious like change your name in canvas to \"Professor McTrusty-Face\". But there's no way you could be sure that I'm not, so please do fork the repo and run your own version of this if you intend to use this or any other tool that asks for any of your passwords.",f(e,"class","title has-text-centered"),f(o,"class","container"),v(o,"max-width","970px"),v(o,"overflow-wrap","anywhere"),f(m,"class","container"),v(m,"max-width","970px"),v(m,"overflow-wrap","anywhere"),v(m,"margin-top","50px"),f(w,"class","container"),v(w,"max-width","970px"),v(w,"overflow-wrap","anywhere"),v(w,"margin-top","50px"),v(w,"margin-bottom","50px")},m(t,i){c(t,e,i),c(t,n,i),c(t,o,i),s(o,a),s(o,r),s(r,p),c(t,h,i),c(t,m,i),s(m,y),s(m,g),s(g,b),c(t,x,i),c(t,w,i)},d(t){t&&i(e),t&&i(n),t&&i(o),t&&i(h),t&&i(m),t&&i(x),t&&i(w)}}}function B(e){let n,a,r,h,v,m,g,b,x,w,_="app"==e[0]&&q(e),$="code"==e[0]&&G();return{c(){n=l("nav"),a=l("div"),r=l("div"),h=l("a"),h.textContent="App",v=d(),m=l("a"),m.textContent="Code",g=d(),_&&_.c(),b=d(),$&&$.c(),x=u(""),f(h,"class","navbar-item svelte-tqwu7r"),y(h,"active","app"==e[0]),f(m,"class","navbar-item svelte-tqwu7r"),y(m,"active","code"==e[0]),f(r,"class","navbar-start"),f(a,"id","navbarBasicExample"),f(a,"class","navbar-menu"),f(n,"class","navbar"),f(n,"role","navigation"),f(n,"aria-label","main navigation")},m(t,i,l){c(t,n,i),s(n,a),s(a,r),s(r,h),s(r,v),s(r,m),c(t,g,i),_&&_.m(t,i),c(t,b,i),$&&$.m(t,i),c(t,x,i),l&&o(w),w=[p(h,"click",e[9]),p(m,"click",e[10])]},p(t,[e]){1&e&&y(h,"active","app"==t[0]),1&e&&y(m,"active","code"==t[0]),"app"==t[0]?_?_.p(t,e):(_=q(t),_.c(),_.m(b.parentNode,b)):_&&(_.d(1),_=null),"code"==t[0]?$||($=G(),$.c(),$.m(x.parentNode,x)):$&&($.d(1),$=null)},i:t,o:t,d(t){t&&i(n),t&&i(g),_&&_.d(t),t&&i(b),$&&$.d(t),t&&i(x),o(w)}}}function D(t,e,n){let o,a="app",r=localStorage.getItem("security_code")||"",s=localStorage.getItem("domain")||"https://canvas.wisc.edu/api/v1/",c="GET",i="",l="",u="";return t.$$.update=()=>{2&t.$$.dirty&&localStorage.setItem("security_code",r),4&t.$$.dirty&&localStorage.setItem("domain",s)},[a,r,s,c,i,l,u,o,function(){let t={security_code:r,domain:s,getorput:c,endpoint:i};"GET"!=c&&(t.data=JSON.stringify(JSON.parse(l))),fetch("https://us-central1-canvas-node-server.cloudfunctions.net/helloWorld",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>t.json()).then(t=>{n(6,u=t),console.log("resp: ",t)}).then(t=>o.scrollIntoView()).catch(t=>console.log(t))},()=>{n(0,a="app")},()=>{n(0,a="code")},()=>{n(0,a="code")},function(){r=this.value,n(1,r)},function(){s=this.value,n(2,s)},function(){i=this.value,n(4,i)},function(){c=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(3,c)},function(){l=this.value,n(5,l)},function(t){w[t?"unshift":"push"](()=>{n(7,o=t)})}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}{constructor(t){super(),j(this,t,D,B,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
